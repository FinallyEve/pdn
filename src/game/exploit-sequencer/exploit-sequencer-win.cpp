#include "game/exploit-sequencer/exploit-sequencer-states.hpp"
#include "game/exploit-sequencer/exploit-sequencer.hpp"
#include "game/exploit-sequencer/exploit-sequencer-resources.hpp"
#include "device/drivers/logger.hpp"

static const char* TAG = "ExploitSeqWin";

ExploitSequencerWin::ExploitSequencerWin(ExploitSequencer* game) :
    BaseWinState<ExploitSequencer, EXPLOIT_INTRO>(game, EXPLOIT_WIN)
{
}

LEDState ExploitSequencerWin::getWinLedState() const {
    return EXPLOIT_SEQ_WIN_STATE;
}

bool ExploitSequencerWin::computeHardMode() const {
    auto& config = game->getConfig();
    return (config.timingWindow <= 6 && config.failsAllowed <= 1);
}

void ExploitSequencerWin::logVictory(int score, bool isHard) const {
    LOG_I(TAG, "EXPLOIT DONE â€” score=%d, hardMode=%s",
          score, isHard ? "true" : "false");
}
